const fs = require("fs");
const SelectMethod = require("./SelectMethod")


//make a method
Array.prototype.random = function () {
  return this[Math.floor(Math.random() * this.length)];
};

const TEXT = `В современных условиях становления российского рынка ценных бумаг особую значимость приобретают исследования по моделированию прогнозов котировок ценных бумаг. Недавние колебания биржевых индексов, продолжающийся кризис ипотечного кредитования в США и другие потрясения рынка ценных бумаг показывают, что необходимость в данных исследованиях назрела. Как в России, так и в передовых развитых странах колебания этого рынка все менее зависят от политического влияния и влияния других нерыночных факторов, что подтверждает необходимость проведения объективных исследований в этой области. Научно-методические разработки по данной тематике могут быть полезны как для юридических, так и для физических лиц. По мере возрастания зависимости российского рынка ценных бумаг от американского, европейского и азиатского рынков — а эта зависимость после вступления России в ВТО, размещения ценных бумаг ведущих российских фондовых игроков на мировых фондовых площадках, значительного роста притока инвестиционного капитала станет неизбежной — данная тема будет очень важной в схемах определения перспектив рынка, противодействия кризисным явлениям на рынке ценных бумаг. Значительная часть населения Российской Федерации владеет ценными бумагами, а в последнее время под влиянием государства происходит «народное» размещение ценных бумаг, особенно акций крупных предприятий и организаций (ВТБ, Сбербанк и др.). В связи с этим благодаря созданию модели прогноза котировок любой гражданин сможет принять решение как о совершении каких-либо действий с ценными бумагами, так и о своем желании вступить в рынок ценных бумаг. Зная состояние и возможности рынка, физическое лицо — держатель ценных бумаг может планировать доходы и расходы, прогнозировать свое финансовое будущее, принимать важные рыночные решения. Модель прогноза котировок ценных бумаг поможет предприятиям и организациям определить перспективы рынка, его динамику, наиболее успешное и доходное направление деятельности. Кроме того, создание модели прогнозирования может предупредить о вероятных кризисных явлениях, предопределит спад котировок ценных бумаг на тех или иных рынках. В конечном итоге, внедрение моделирования прогноза ценных бумаг может дать определенный экономический эффект, конкретную финансовую выгоду физическим и юридическим лицам. Почему нейронные сети? Несмотря на то что для моделирования прогнозов котировок ценных бумаг существует много эффективных методов, такое свойство моделей нейронных сетей, как универсальность, т.е. возможность их использования для всех типов ценных бумаг, определяет необходимость исследования в данной области и тщательного их изучения. На протяжении многих лет ключевыми были методы моделирования прогнозов котировок ценных бумаг, основой которых является линейное программирование. Однако в задачах, где линейная аппроксимация неудовлетворительна, линейные модели работают плохо. В связи с этим важное значение приобретает возможность моделей нейронных сетей быть нелинейными, что весьма существенно при моделировании прогнозов. Модели нейронных сетей относятся к интеллектуальным системам, они позволяют улучшить результаты благодаря самообучению. При этом от пользователя, конечно, требуются определенные теоретические знания о том, как следует подготавливать данные, выбирая нужную архитектуру сети, и интерпретировать полученные результаты. Однако минимально необходимый уровень знаний для использования модели нейронных сетей гораздо скромнее, чем, например, при использовании традиционных методов статистики. Независимо от типа данных или специфики наблюдаемого явления модель нейронной сети является неким абстрактным подходом в отличие от традиционных. Обычно аналитик специально подготавливает данные для машины таким образом, чтобы она смогла решить поставленную задачу. В отличие от технического анализа, нейро-сетевой анализ не налагает ограничений на характер входной информации. Кроме того, нейронные сети способны находить индикаторы и строить по ним оптимальную стратегию прогноза для типового экономического инструмента. Более того, эти стратегии могут быть адаптивными, меняясь вместе с рынком, что особенно важно для молодых, активно развивающихся рынков, в частности для российского. Влияние случайных факторов колебания значений котировок ценных бумаг, вызванных непредсказуемыми изменениями экономической ситуации в целом, воздействия государства, а также других факторов предсказать практически невозможно. Кроме того, нужно учитывать область распределения возможных фактических значений котировок ценных бумаг, а также ряда других факторов, которые будут находиться в определенном интервале, гарантирующем определенную вероятность прогноза. Нейронные сети обратного распространения — это современный инструмент моделирования, позволяющий эффективно решать задачи поиска закономерностей, прогнозирования, качественного анализа с учетом указанных особенностей. Операции обучения повторяются для всех обучающих векторов. Обучение завершается по достижении для каждого из обучающих образов значения функции ошибки, не превосходящего, или после максимально допустимого числа итераций. Следует учесть, что векторы из обучающей последовательности лучше предъявлять на вход в случайном порядке. Во многих случаях желательно наделять каждый нейрон обучаемым смещением. Это позволяет сдвигать начало отсчета логистической функции, что дает эффект, аналогичный подстройке порога персептронного нейрона, и приводит к ускорению процесса обучения. Такая возможность может быть легко введена в обучающий алгоритм с помощью добавляемого к каждому нейрону веса, присоединенного к +1. Этот вес обучается так же, как и все остальные веса, за исключением того, что подаваемый на него сигнал всегда равен +1, а не выходу нейрона предыдущего слоя. Выходы каждого нейрона сети лежат в диапазоне (0,1) — области значений логистической функции. Это надо учитывать при формировании обучающей выборки. Если необходимо получить от сети бинарный выход, то, как правило, вместо 0 используют 0,1, а вместо 1 — 0,9, так как границы интервала недостижимы. Модификации алгоритма обратного распространения связаны с использованием различных функций ошибки, других активационных функций, различных процедур определения направления и величины шага.`
const words = [..."абвгдеёжзийклмнопрстуфхцчшщъыьэюя "];
let res = SelectMethod(2, 10, TEXT.toLowerCase().replace(/[-+()1234!?«»<>=_5678@90—,.]/g, ''), words);
console.log(res)
